<div class="modal-overlay" id="modal" style="display: flex;">
  <div class="modal modal-container">
    <div class="modal-toolbar">
      <div class="formatting-group">
        <button class="tool-btn" data-cmd="bold" title="Negrita"
          ><b>B</b></button
        >
        <button class="tool-btn" data-cmd="italic" title="Itálica"
          ><i>I</i></button
        >
        <button class="tool-btn" data-cmd="underline" title="Subrayado"
          ><u>U</u></button
        >
        <label class="tool-btn img-upload" title="Adjuntar archivo">
          <svg
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path
              d="M21.44 11.05L12.95 19.54C10.88 21.61 7.52 21.61 5.46 19.54C3.39 17.48 3.39 14.12 5.46 12.05L13.95 3.56C15.33 2.18 17.56 2.18 18.95 3.56C20.33 4.95 20.33 7.18 18.95 8.56L10.46 17.05C9.77 17.74 8.65 17.74 7.96 17.05C7.27 16.36 7.27 15.24 7.96 14.55L15.73 6.78"
            ></path>
          </svg>
          <input type="file" accept="image/*" hidden />
        </label>
      </div>

      <button
        class="close-btn"
        onclick="window.dispatchEvent(new Event('close-post-modal'))"
        aria-label="Cerrar"
      >
        ✕
      </button>
    </div>

    <div
      class="modal-editor"
      contenteditable="true"
      data-placeholder="¡Compartí tus ideas!"
    >
    </div>

    <div class="modal-footer">
      <button class="post-btn">Publicar</button>
    </div>
  </div>
</div>

<style>
  :root {
    --primary-purple: #482d8a;
    --accent-orange: #da9d4f;
    --bg-light: #f1edfa;
    --gradient-border: linear-gradient(
      156.25deg,
      #825d97 0%,
      #ab4afd 50%,
      #482d8a 100%
    );
  }

  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(15, 10, 30, 0.6); /* Slightly darker/richer overlay */
    backdrop-filter: blur(4px); /* Modern touch */
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1001;
    padding: 20px;
    backdrop-filter: blur(4px);
    transition: opacity 0.3s ease;
    animation: fadeIn 0.2s ease-out;
  }

  /* CONTAINER WITH GRADIENT BORDER */
  .modal-container {
    position: relative;
    width: 100%;
    max-width: 520px;
    background: white;
    border-radius: 24px;
    background-clip: padding-box;
    border: 2px solid transparent; /* Placeholder for gradient */
    box-shadow: 0 10px 30px rgba(72, 45, 138, 0.2);
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  /* The Gradient Border Hack */
  .modal-container::before {
    content: "";
    position: absolute;
    inset: 0;
    margin: -2px;
    border-radius: inherit;
    z-index: -1;
  }

  /* TOOLBAR */
  .modal-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: var(--bg-light);
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  }

  .formatting-group {
    display: flex;
    gap: 8px;
  }

  .tool-btn {
    border: 1px solid rgba(72, 45, 138, 0.1);
    background: white;
    width: 36px;
    height: 36px;
    border-radius: 10px;
    cursor: pointer;
    color: var(--primary-purple);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
  }

  .tool-btn:hover {
    background: #e6ddfa;
    transform: translateY(-1px);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  }

  .close-btn {
    background: transparent;
    border: none;
    font-size: 1.2rem;
    cursor: pointer;
    color: var(--primary-purple);
    opacity: 0.6;
    transition: opacity 0.2s;
    padding: 5px;
  }

  .close-btn:hover {
    opacity: 1;
  }

  /* EDITOR */
  .modal-editor {
    padding: 20px;
    min-height: 200px;
    max-height: 60vh;
    overflow-y: auto;
    outline: none;
    font-size: 1.1rem;
    line-height: 1.5;
    color: #333;
  }

  /* Placeholder logic for ContentEditable */
  .modal-editor:empty:before {
    content: attr(data-placeholder);
    color: #aaa;
    pointer-events: none;
  }

  .modal-editor img {
    max-width: 100%;
    border-radius: 12px;
    margin: 10px 0;
    display: block;
  }

  /* FOOTER */
  .modal-footer {
    padding: 12px 16px;
    display: flex;
    justify-content: flex-end;
    background: var(--bg-light);
    border-top: 1px solid rgba(0, 0, 0, 0.05);
  }

  .post-btn {
    background: var(--accent-orange);
    color: #fff;
    font-weight: 700;
    padding: 10px 24px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    transition:
      background 0.2s,
      transform 0.1s;
    box-shadow: 0 4px 0px #b57a2d; /* Improved "button" depth */
  }

  .post-btn:hover {
    background: #e8a85a;
    transform: translateY(-1px);
  }

  .post-btn:active {
    transform: translateY(2px);
    box-shadow: none;
  }

  .modal {
    animation: popIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    transform-origin: center;
  }

  /* Entrance Animations */
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes popIn {
    0% {
      opacity: 0;
      transform: scale(0.9) translateY(20px);
    }
    100% {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  /* Exit Class (Optional: for a smooth close) */
  .modal-overlay.closing {
    opacity: 0;
    pointer-events: none;
  }
  .modal-overlay.closing .modal {
    transform: scale(0.9);
    transition: transform 0.2s ease-in;
  }
</style>
